---
- name: Homelab configuration
  hosts: all
  become: true

  roles:
    - { role: base, tags: [base] }
    - { role: users, tags: [users] }
    - { role: nix, tags: [nix] }

    # databases
    - { role: redis, tags: [redis] }

    # services
    - { role: glances, tags: [glances] }
    - { role: opengist, tags: [opengist] }
    - { role: paperless_ngx, tags: [paperless_ngx] }
    - { role: restic_rest_server, tags: [restic_rest_server] }

    # reverse proxies
    - { role: caddy, tags: [caddy] }
    - { role: cloudflared, tags: [cloudflared] }
